

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-88158104-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Power Take-Off/PTO-Sim &mdash; WEC-Sim  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> WEC-Sim
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="terminology.html">Terminology</a><ul>
<li class="toctree-l2"><a class="reference internal" href="terminology.html#variables">Variables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#matlab-requirements">MATLAB Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#download-wec-sim">Download WEC-Sim</a><ul>
<li class="toctree-l3"><a class="reference internal" href="getting_started.html#option-1-clone-repository-from-github-recommended-for-users">Option 1. Clone Repository from GitHub (Recommended for Users)</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting_started.html#option-2-fork-with-git-recommended-for-developers">Option 2. Fork with Git (Recommended for Developers)</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting_started.html#option-3-static-code-download-not-recommended">Option 3. Static Code Download (Not Recommended)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#install-wec-sim">Install WEC-Sim</a><ul>
<li class="toctree-l3"><a class="reference internal" href="getting_started.html#step-1-add-wec-sim-source-code-to-matlab-path">Step 1. Add WEC-Sim Source Code to MATLAB Path</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting_started.html#step-2-add-wec-sim-library-to-simulink">Step 2. Add WEC-Sim Library to Simulink</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting_started.html#step-3-test-the-installation">Step 3. Test the Installation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="overview.html#wec-sim-model-files">WEC-Sim Model Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="overview.html#hydrodynamic-data">Hydrodynamic Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="overview.html#geometry-file">Geometry File</a></li>
<li class="toctree-l3"><a class="reference internal" href="overview.html#simulink-model">Simulink Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="overview.html#input-file">Input File</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#running-wec-sim">Running WEC-Sim</a><ul>
<li class="toctree-l3"><a class="reference internal" href="overview.html#step-1-run-bemio">Step 1: Run BEMIO</a></li>
<li class="toctree-l3"><a class="reference internal" href="overview.html#step-2-build-simulink-model">Step 2: Build Simulink Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="overview.html#step-3-write-wecsiminputfile-m">Step 3: Write wecSimInputFile.m</a></li>
<li class="toctree-l3"><a class="reference internal" href="overview.html#step-4-run-wec-sim">Step 4: Run WEC-Sim</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="theory.html">Theory</a><ul>
<li class="toctree-l2"><a class="reference internal" href="theory.html#coordinate-system">Coordinate System</a></li>
<li class="toctree-l2"><a class="reference internal" href="theory.html#units">Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="theory.html#boundary-element-method-bem">Boundary Element Method (BEM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="theory.html#time-domain-formulation">Time-Domain Formulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="theory.html#numerical-methods">Numerical Methods</a><ul>
<li class="toctree-l3"><a class="reference internal" href="theory.html#ramp-function">Ramp Function</a></li>
<li class="toctree-l3"><a class="reference internal" href="theory.html#sinusoidal-steady-state-response">Sinusoidal Steady-State Response</a></li>
<li class="toctree-l3"><a class="reference internal" href="theory.html#convolution-integral-formulation">Convolution Integral Formulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="theory.html#state-space">State Space</a><ul>
<li class="toctree-l4"><a class="reference internal" href="theory.html#calculation-of-k-r-from-state-space-matrices">Calculation of <img class="math" src="_images/math/823642569004dcf6ef16716b13ae373f63d9e1d5.png" alt="K_{r}"/> from State Space Matrices</a></li>
<li class="toctree-l4"><a class="reference internal" href="theory.html#realization-theory">Realization Theory</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="theory.html#regular-waves">Regular Waves</a></li>
<li class="toctree-l2"><a class="reference internal" href="theory.html#irregular-waves">Irregular Waves</a></li>
<li class="toctree-l2"><a class="reference internal" href="theory.html#wave-spectra">Wave Spectra</a><ul>
<li class="toctree-l3"><a class="reference internal" href="theory.html#pierson-moskowitz-pm">Pierson–Moskowitz (PM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="theory.html#bretschneider-bs">Bretschneider (BS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="theory.html#jonswap-js">JONSWAP (JS)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="theory.html#power-take-off-pto">Power Take-Off (PTO)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="theory.html#linear-pto">Linear PTO</a></li>
<li class="toctree-l3"><a class="reference internal" href="theory.html#hydraulic-pto">Hydraulic PTO</a></li>
<li class="toctree-l3"><a class="reference internal" href="theory.html#mechanical-pto">Mechanical PTO</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="theory.html#mooring">Mooring</a><ul>
<li class="toctree-l3"><a class="reference internal" href="theory.html#mooring-matrix">Mooring Matrix</a></li>
<li class="toctree-l3"><a class="reference internal" href="theory.html#id24">MoorDyn</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="theory.html#nonlinear-buoynancy-and-froude-krylov-wave-excitation">Nonlinear Buoynancy and Froude-Krylov Wave Excitation</a></li>
<li class="toctree-l2"><a class="reference internal" href="theory.html#viscous-damping-and-morison-elements">Viscous Damping and Morison Elements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="theory.html#viscous-damping">Viscous Damping</a></li>
<li class="toctree-l3"><a class="reference internal" href="theory.html#morison-elements">Morison Elements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="theory.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="code_structure.html">Code Structure</a><ul>
<li class="toctree-l2"><a class="reference internal" href="code_structure.html#wec-sim-source-code">WEC-Sim Source Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="code_structure.html#wec-sim-objects">WEC-Sim Objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="code_structure.html#simulation-class">Simulation Class</a></li>
<li class="toctree-l3"><a class="reference internal" href="code_structure.html#wave-class">Wave Class</a><ul>
<li class="toctree-l4"><a class="reference internal" href="code_structure.html#nowave">noWave</a></li>
<li class="toctree-l4"><a class="reference internal" href="code_structure.html#nowavecic">noWaveCIC</a></li>
<li class="toctree-l4"><a class="reference internal" href="code_structure.html#regular">regular</a></li>
<li class="toctree-l4"><a class="reference internal" href="code_structure.html#regularcic">regularCIC</a></li>
<li class="toctree-l4"><a class="reference internal" href="code_structure.html#irregular">irregular</a></li>
<li class="toctree-l4"><a class="reference internal" href="code_structure.html#spectrumimport">spectrumImport</a></li>
<li class="toctree-l4"><a class="reference internal" href="code_structure.html#etaimport">etaImport</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="code_structure.html#body-class">Body Class</a></li>
<li class="toctree-l3"><a class="reference internal" href="code_structure.html#constraint-class">Constraint Class</a></li>
<li class="toctree-l3"><a class="reference internal" href="code_structure.html#pto-class">PTO Class</a></li>
<li class="toctree-l3"><a class="reference internal" href="code_structure.html#mooring-class">Mooring Class</a></li>
<li class="toctree-l3"><a class="reference internal" href="code_structure.html#response-class">Response Class</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="code_structure.html#wec-sim-library">WEC-Sim Library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="code_structure.html#body-elements">Body Elements</a></li>
<li class="toctree-l3"><a class="reference internal" href="code_structure.html#frames">Frames</a></li>
<li class="toctree-l3"><a class="reference internal" href="code_structure.html#constraints">Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="code_structure.html#ptos">PTOs</a></li>
<li class="toctree-l3"><a class="reference internal" href="code_structure.html#mooring">Mooring</a></li>
<li class="toctree-l3"><a class="reference internal" href="code_structure.html#simulink-simscape-blocks">Simulink/Simscape Blocks</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="code_structure.html#id2">Output Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="code_structure.html#functions-external-codes">Functions &amp; External Codes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#two-body-point-absorber-rm3">Two-Body Point Absorber (RM3)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorials.html#device-geometry">Device Geometry</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorials.html#wec-sim-model-files">WEC-Sim Model Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorials.html#rm3-tutorial">RM3 Tutorial</a><ul>
<li class="toctree-l4"><a class="reference internal" href="tutorials.html#step-1-run-bemio">Step 1: Run BEMIO</a></li>
<li class="toctree-l4"><a class="reference internal" href="tutorials.html#step-2-build-simulink-model">Step 2: Build Simulink Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="tutorials.html#step-3-write-wecsiminputfile-m">Step 3: Write wecSimInputFile.m</a></li>
<li class="toctree-l4"><a class="reference internal" href="tutorials.html#step-4-run-wec-sim">Step 4: Run WEC-Sim</a></li>
<li class="toctree-l4"><a class="reference internal" href="tutorials.html#step-5-post-processing">Step 5: Post-processing</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#oscillating-surge-wec-oswec">Oscillating Surge WEC (OSWEC)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorials.html#id3">Device Geometry</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorials.html#id4">WEC-Sim Model Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorials.html#oswec-tutorial">OSWEC Tutorial</a><ul>
<li class="toctree-l4"><a class="reference internal" href="tutorials.html#id5">Step 1: Run BEMIO</a></li>
<li class="toctree-l4"><a class="reference internal" href="tutorials.html#id7">Step 2: Build Simulink Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="tutorials.html#id8">Step 3: Write wecSimInputFile.m</a></li>
<li class="toctree-l4"><a class="reference internal" href="tutorials.html#id9">Step 4: Run WEC-Sim</a></li>
<li class="toctree-l4"><a class="reference internal" href="tutorials.html#id12">Step 5: Post-processing</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#wec-sim-examples">WEC-Sim Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#applications-repository">Applications Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="advanced_features.html">Advanced Features</a><ul>
<li class="toctree-l2"><a class="reference internal" href="advanced_features.html#bemio">BEMIO</a><ul>
<li class="toctree-l3"><a class="reference internal" href="advanced_features.html#bemio-functions">BEMIO Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="advanced_features.html#bemio-hydro-data-structure">BEMIO <em>hydro</em> Data Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="advanced_features.html#writing-your-own-h5-file">Writing Your Own h5 File</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="advanced_features.html#simulation-features">Simulation Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="advanced_features.html#multiple-condition-runs-mcr">Multiple Condition Runs (MCR)</a></li>
<li class="toctree-l3"><a class="reference internal" href="advanced_features.html#state-space-representation">State-Space Representation</a></li>
<li class="toctree-l3"><a class="reference internal" href="advanced_features.html#time-step-features">Time-Step Features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="advanced_features.html#fixed-time-step-ode4">Fixed Time-Step (ode4)</a></li>
<li class="toctree-l4"><a class="reference internal" href="advanced_features.html#variable-time-step-ode45">Variable Time-Step (ode45)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="advanced_features.html#wave-features">Wave Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="advanced_features.html#irregular-wave-binning">Irregular Wave Binning</a></li>
<li class="toctree-l3"><a class="reference internal" href="advanced_features.html#wave-directionality">Wave Directionality</a></li>
<li class="toctree-l3"><a class="reference internal" href="advanced_features.html#wave-directional-spreading">Wave Directional Spreading</a></li>
<li class="toctree-l3"><a class="reference internal" href="advanced_features.html#irregular-waves-with-seeded-phase">Irregular Waves with Seeded Phase</a></li>
<li class="toctree-l3"><a class="reference internal" href="advanced_features.html#wave-gauge-placement">Wave Gauge Placement</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="advanced_features.html#body-features">Body Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="advanced_features.html#body-mass-and-geometry-features">Body Mass and Geometry Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="advanced_features.html#nonlinear-buoyancy-and-froude-krylov-excitation">Nonlinear Buoyancy and Froude-Krylov Excitation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="advanced_features.html#nonlinear-settings">Nonlinear Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="advanced_features.html#stl-file-generation">STL File Generation</a></li>
<li class="toctree-l4"><a class="reference internal" href="advanced_features.html#nonlinear-buoyancy-and-froude-krylov-wave-excitation-tutorial-heaving-ellipsoid">Nonlinear Buoyancy and Froude-Krylov Wave Excitation Tutorial - Heaving Ellipsoid</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="advanced_features.html#non-hydrodynamic-bodies">Non-Hydrodynamic Bodies</a></li>
<li class="toctree-l3"><a class="reference internal" href="advanced_features.html#body-to-body-interactions">Body-To-Body Interactions</a></li>
<li class="toctree-l3"><a class="reference internal" href="advanced_features.html#viscous-damping-and-morison-elements">Viscous Damping and Morison Elements</a><ul>
<li class="toctree-l4"><a class="reference internal" href="advanced_features.html#viscous-damping">Viscous Damping</a></li>
<li class="toctree-l4"><a class="reference internal" href="advanced_features.html#morison-elements">Morison Elements</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="advanced_features.html#constraint-and-pto-features">Constraint and PTO Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="advanced_features.html#power-take-off-pto-sim">Power Take-Off/PTO-Sim</a><ul>
<li class="toctree-l4"><a class="reference internal" href="advanced_features.html#tutorial-rm3-with-pto-sim">Tutorial: RM3 with PTO-Sim</a></li>
<li class="toctree-l4"><a class="reference internal" href="advanced_features.html#tutorial-oswec-with-pto-sim">Tutorial: OSWEC with PTO-Sim</a></li>
<li class="toctree-l4"><a class="reference internal" href="advanced_features.html#other-pto-sim-tutorials">Other PTO-Sim Tutorials</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="advanced_features.html#mooring-features">Mooring Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="advanced_features.html#mooring-matrix">Mooring Matrix</a></li>
<li class="toctree-l3"><a class="reference internal" href="advanced_features.html#moordyn">MoorDyn</a><ul>
<li class="toctree-l4"><a class="reference internal" href="advanced_features.html#tutorial-rm3-with-moordyn">Tutorial: RM3 with MoorDyn</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="advanced_features.html#visualization-paraview">Visualization/Paraview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="advanced_features.html#getting-started-installation">Getting Started - Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="advanced_features.html#setting-up-paraview-output">Setting Up Paraview Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="advanced_features.html#outputs-and-opening-in-paraview">Outputs and Opening in Paraview</a></li>
<li class="toctree-l3"><a class="reference internal" href="advanced_features.html#basic-visualization-manipulation">Basic Visualization Manipulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="advanced_features.html#visualizing-non-linear-buoyancy-and-froude-krylov-wave-excitation">Visualizing Non-Linear Buoyancy and Froude-Krylov Wave Excitation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="advanced_features.html#decay-tests">Decay Tests</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="webinars.html">Webinars</a><ul>
<li class="toctree-l2"><a class="reference internal" href="webinars.html#online-training-course">Online Training Course</a><ul>
<li class="toctree-l3"><a class="reference internal" href="webinars.html#wec-sim-overview">WEC-Sim Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="webinars.html#theory-workflow">Theory &amp; Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="webinars.html#wec-sim-code-structure">WEC-Sim Code Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="webinars.html#wave-implementation">Wave Implementation</a></li>
<li class="toctree-l3"><a class="reference internal" href="webinars.html#body-implementation">Body Implementation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="webinars.html#advanced-features-webinars">Advanced Features Webinars</a><ul>
<li class="toctree-l3"><a class="reference internal" href="webinars.html#webinar-1-bemio-and-mcr">Webinar 1 - BEMIO and MCR</a></li>
<li class="toctree-l3"><a class="reference internal" href="webinars.html#webinar-2-nonlinear-buoyancy-and-froude-krylov-wave-excitation-non-hydro-and-b2b">Webinar 2 - Nonlinear Buoyancy and Froude-Krylov Wave Excitation, Non-Hydro and B2B</a></li>
<li class="toctree-l3"><a class="reference internal" href="webinars.html#webinar-3-pto-and-control">Webinar 3 - PTO and Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="webinars.html#webinar-4-mooring-and-visualization">Webinar 4 - Mooring and Visualization</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="acknowledgements.html">Acknowledgements</a><ul>
<li class="toctree-l2"><a class="reference internal" href="acknowledgements.html#past-wec-sim-contributors">Past WEC-Sim Contributors</a></li>
<li class="toctree-l2"><a class="reference internal" href="acknowledgements.html#funding">Funding</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications</a><ul>
<li class="toctree-l2"><a class="reference internal" href="publications.html#news-articles">News Articles</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="release_notes.html#current-release">Current Release</a><ul>
<li class="toctree-l3"><a class="reference internal" href="release_notes.html#id2">WEC-Sim v4.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="release_notes.html#features-in-development">Features in Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_notes.html#previous-releases">Previous Releases</a><ul>
<li class="toctree-l3"><a class="reference internal" href="release_notes.html#id3">WEC-Sim v3.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="release_notes.html#id4">WEC-Sim v3.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="release_notes.html#id5">WEC-Sim v2.2</a></li>
<li class="toctree-l3"><a class="reference internal" href="release_notes.html#id6">WEC-Sim v2.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="release_notes.html#id7">WEC-Sim v2.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="release_notes.html#id8">WEC-Sim v1.3</a></li>
<li class="toctree-l3"><a class="reference internal" href="release_notes.html#id9">WEC-Sim v1.2</a></li>
<li class="toctree-l3"><a class="reference internal" href="release_notes.html#id10">WEC-Sim v1.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="release_notes.html#id11">WEC-Sim v1.0</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Online Forum</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">WEC-Sim</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Power Take-Off/PTO-Sim</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/ptosim.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="power-take-off-pto-sim">
<h1>Power Take-Off/PTO-Sim<a class="headerlink" href="#power-take-off-pto-sim" title="Permalink to this headline">¶</a></h1>
<p>PTO-Sim is the WEC-Sim module responsible for accurately modeling a WEC’s conversion of mechanical power to electrical power.
While the PTO blocks native to WEC-Sim are modeled as a simple linear spring-damper systems, PTO-Sim is capable of modeling many power conversion chains (PCC) such as mechanical drivetrain and hydraulic drivetrain.
PTO-Sim is made of native Simulink blocks coupled with WEC-Sim, using WEC-Sim’s user-defined PTO blocks, where the WEC-Sim response (relative displacement and velocity for linear motion and angular position and velocity for rotary motion) is the PTO-Sim input.
Similarly, the PTO force or torque is the WEC-Sim input.
For more information on how PTO-Sim works, refer to [So et al., 2015], and the <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/webinars.html#webinar-3-pto-and-control">PTO and Control webinar</a>.</p>
<p>The files for the PTO-Sim tutorials described in this section can be found in the <a class="reference external" href="https://github.com/WEC-Sim/WEC-Sim_Applications">WEC-Sim Applications repository</a> <strong>PTO-Sim</strong> example.</p>
<div class="section" id="tutorial-rm3-with-pto-sim">
<h2>Tutorial: RM3 with PTO-Sim<a class="headerlink" href="#tutorial-rm3-with-pto-sim" title="Permalink to this headline">¶</a></h2>
<p>This section describes how to use RM3 with PTO-Sim. Two tutorials will be given in this section: one for the RM3 with a hydraulic PTO (non-compressible) and another for the RM3 with a direct drive PTO.</p>
<div class="section" id="rm3-with-hydraulic-pto">
<h3>RM3 with Hydraulic PTO<a class="headerlink" href="#rm3-with-hydraulic-pto" title="Permalink to this headline">¶</a></h3>
<p>The hydraulic PTO example used in this section consists of a piston, a rectifying valve, a high pressure accumulator, a hydraulic motor coupled to a rotary generator, and a low pressure accumulator.</p>
<div class="figure align-default">
<a class="reference internal image-reference" href="_images/HYDPHYMODEL.PNG"><img alt="_images/HYDPHYMODEL.PNG" src="_images/HYDPHYMODEL.PNG" style="width: 400pt;" /></a>
</div>
<p>There are two ways of modeling the hydraulic PTO: with a compressible fluid hydraulic, and with a non-compressible fluid hydraulic. The compressible fluid model uses the properties of fluid such as an effective bulk modulus and density while the non-compressible fluid does not.</p>
<p>In this section, a step by step tutorial on how to set up and run the RM3 simulation with PTO-Sim is provided. All the files used in WEC-Sim will remain the same. An additional file that is needed is the PTO-Sim input file (<code class="docutils literal notranslate"><span class="pre">ptoSimInputFile.m</span></code>). If the rotary generator lookup table is used, a datasheet that contains generator efficiency, torque, and angular velocity is needed and should be named as <code class="docutils literal notranslate"><span class="pre">table</span></code> in Workspace (<code class="docutils literal notranslate"><span class="pre">table.eff</span></code>, <code class="docutils literal notranslate"><span class="pre">table.Tpu</span></code>,and <code class="docutils literal notranslate"><span class="pre">table.omegapu</span></code>). More details, refer to <a class="reference internal" href="#step-8">Step 8</a>. In summary, the files need to run RM3 with PTO-Sim case are the following:</p>
<ul class="simple">
<li><p>WEC-Sim input file: <code class="docutils literal notranslate"><span class="pre">wecSimInputFile.m</span></code> (make sure to set the PTO linear damping to zero)</p></li>
<li><p>Simulink model: <code class="docutils literal notranslate"><span class="pre">RM3.slx</span></code></p></li>
<li><p>Geometry file for each body: <code class="docutils literal notranslate"><span class="pre">float.stl</span></code> and <code class="docutils literal notranslate"><span class="pre">plate.stl</span></code></p></li>
<li><p>Hydrodynamic data file(s): <code class="docutils literal notranslate"><span class="pre">rm3.h5</span></code></p></li>
<li><p>Optional user defined post-processing file: <code class="docutils literal notranslate"><span class="pre">userDefinedFunction.m</span></code></p></li>
<li><p>PTO-Sim input file: <code class="docutils literal notranslate"><span class="pre">ptoSimInputFile.m</span></code></p></li>
<li><p>Datasheet for the rotary generator: <code class="docutils literal notranslate"><span class="pre">table</span></code> (<code class="docutils literal notranslate"><span class="pre">table.eff</span></code>, <code class="docutils literal notranslate"><span class="pre">table.Tpu</span></code>,and <code class="docutils literal notranslate"><span class="pre">table.omegapu</span></code>)</p></li>
<li><p>For the hydraulic PTOs: <code class="docutils literal notranslate"><span class="pre">variableMotorVolume.m</span></code></p></li>
</ul>
<p><strong>Simulink Model</strong>
The Simulink model can be built as follows:</p>
<ul class="simple">
<li><p>Step 1: Navigate to the RM3 tutorial <code class="docutils literal notranslate"><span class="pre">$Source/tutorials/RM3</span></code>.</p></li>
<li><p>Step 2: Open <code class="docutils literal notranslate"><span class="pre">RM3.slx</span></code> file and replace Translational PTO (local Z) with Translational PTO UD Force (Local Z).</p></li>
</ul>
<div class="figure align-default">
<a class="reference internal image-reference" href="_images/TRANSLATIONALPTOUD.PNG"><img alt="_images/TRANSLATIONALPTOUD.PNG" src="_images/TRANSLATIONALPTOUD.PNG" style="width: 400pt;" /></a>
</div>
<ul class="simple">
<li><p>Step 3: Use a subsystem and rename it to PTO-Sim where input is response and output is force.</p></li>
</ul>
<div class="figure align-default">
<a class="reference internal image-reference" href="_images/RM3WITHPTOSIMBLOCK.PNG"><img alt="_images/RM3WITHPTOSIMBLOCK.PNG" src="_images/RM3WITHPTOSIMBLOCK.PNG" style="width: 400pt;" /></a>
</div>
<ul class="simple">
<li><p>Step 4: Go inside PTO-Sim block and add one bus selector and two selector blocks. Since PTO-Sim block is connected to the WEC-Sim translational joint block, you can select position and velocity and therefore “signal1” and “signal2” will change to “position” and “velocity”. Because the heave motion is driving the piston, selection index of each selector needs to be changed to 3.</p></li>
</ul>
<div class="figure align-default">
<a class="reference internal image-reference" href="_images/SELECTORS.PNG"><img alt="_images/SELECTORS.PNG" src="_images/SELECTORS.PNG" style="width: 400pt;" /></a>
</div>
<ul class="simple">
<li><p>Step 5: Go to Simulink Library Browser to access PTO-Sim Library.</p></li>
</ul>
<div class="figure align-default">
<a class="reference internal image-reference" href="_images/OPENPTOSIMLIB.PNG"><img alt="_images/OPENPTOSIMLIB.PNG" src="_images/OPENPTOSIMLIB.PNG" style="width: 400pt;" /></a>
</div>
<ul class="simple">
<li><p>Step 6: By looking at the physical hydraulic PTO model as shown above, user can simply drag and drop PTO-Sim library blocks. Piston, valves, accumulator blocks are located under the Hydraulic block. Rotary generator lookup table is under the Generator block.</p></li>
</ul>
<div class="figure align-default">
<a class="reference internal image-reference" href="_images/USEPTOSIMLIB.PNG"><img alt="_images/USEPTOSIMLIB.PNG" src="_images/USEPTOSIMLIB.PNG" style="width: 400pt;" /></a>
</div>
<ul class="simple">
<li><p>Step 7: Since two accumulators are needed for the high pressure accumulator and low pressure accumulator, the user needs to double-click on each block and give a number to each accumulator. For example, <code class="docutils literal notranslate"><span class="pre">ptosim.accumulator(1)</span></code> is called high pressure accumulator and <code class="docutils literal notranslate"><span class="pre">ptosim.accumulator(2)</span></code> is called low pressure accumulator.</p></li>
</ul>
<div class="figure align-default">
<a class="reference internal image-reference" href="_images/MULTIPLEACCUMULATORS.PNG"><img alt="_images/MULTIPLEACCUMULATORS.PNG" src="_images/MULTIPLEACCUMULATORS.PNG" style="width: 400pt;" /></a>
</div>
<ul class="simple" id="step-8">
<li><p>Step 8: If a rotary generator lookup table is used, this block assumes the user will provide the datasheet. After the datasheet is loaded into <code class="docutils literal notranslate"><span class="pre">Workspace</span></code>, it needs to be named as <code class="docutils literal notranslate"><span class="pre">table</span></code> because the word <code class="docutils literal notranslate"><span class="pre">table</span></code> is used inside Simulink lookup table block. The datasheet in tutorials is taken from ABB datasheet part number M3BJ315SMC. The lookup table takes three inputs: efficiency (<code class="docutils literal notranslate"><span class="pre">table.eff</span></code>), angular velocity (<code class="docutils literal notranslate"><span class="pre">table.Tpu</span></code>), and generator torque (<code class="docutils literal notranslate"><span class="pre">table.omegapu</span></code>), respectively.</p></li>
</ul>
<div class="figure align-default">
<a class="reference internal image-reference" href="_images/ROTARYHIGHLEVELBLOCK.PNG"><img alt="_images/ROTARYHIGHLEVELBLOCK.PNG" src="_images/ROTARYHIGHLEVELBLOCK.PNG" style="width: 400pt;" /></a>
</div>
<div class="figure align-default">
<a class="reference internal image-reference" href="_images/ROTARYBLOCK.PNG"><img alt="_images/ROTARYBLOCK.PNG" src="_images/ROTARYBLOCK.PNG" style="width: 400pt;" /></a>
</div>
<div class="figure align-default">
<a class="reference internal image-reference" href="_images/ROTARYGENLOOKUPTABLE.PNG"><img alt="_images/ROTARYGENLOOKUPTABLE.PNG" src="_images/ROTARYGENLOOKUPTABLE.PNG" style="width: 400pt;" /></a>
</div>
<ul class="simple">
<li><p>Step 9: After the high pressure and low pressure accumulators have been identified, and the rotary generator lookup table datasheet has been setup, all the blocks can be connected together.</p></li>
</ul>
<p>Position and velocity from selectors are used as inputs to the compressible fluid piston. This block also needs to know top and bottom volumetric flows which come from the rectifying check valve. The piston then outputs PTO force that will be used by WEC-Sim. Two other outputs are the piston pressures. The rectifying check valve takes both the pressures from the piston and accumulators. Both high and low pressure accumulators take the volumetric flows from the rectifying check valve and hydraulic motor. The hydraulic motor uses the knowledge of the pressures from both accumulator and generator torque from the rotary generator. The rotary generator needs angular velocity from the hydraulic motor. The figure below shows how to connect all the blocks together.</p>
<div class="figure align-default">
<a class="reference internal image-reference" href="_images/HYDPTOSIM.PNG"><img alt="_images/HYDPTOSIM.PNG" src="_images/HYDPTOSIM.PNG" style="width: 400pt;" /></a>
</div>
<p><strong>Input File</strong>
In this section, PTO-Sim input file (<code class="docutils literal notranslate"><span class="pre">ptoSimInputFile.m</span></code>) is defined and categorized into sections such as piston, rectifying check valve, high pressure accumulator, hydraulic motor, low pressure accumulator, and rotary generator.</p>
<div class="figure align-default">
<a class="reference internal image-reference" href="_images/PTOSIMINPUTFILE.PNG"><img alt="_images/PTOSIMINPUTFILE.PNG" src="_images/PTOSIMINPUTFILE.PNG" style="width: 400pt;" /></a>
</div>
<p><strong>Simulation and Post-processing</strong>
Simulation and post-processing are the same process as described in WEC-Sim Simulation example above.</p>
</div>
<div class="section" id="rm3-with-direct-drive-pto">
<h3>RM3 with Direct Drive PTO<a class="headerlink" href="#rm3-with-direct-drive-pto" title="Permalink to this headline">¶</a></h3>
<p>A mechanical PTO is used in this example and is modeled as a direct drive linear generator. The main components of this example consist of magnets and a coil where the magnet assembly is attached to the heaving float and the coil is located inside the spar. As the float moves up and down, the magnet assembly creates a change in the magnetic field surrounding the spar that contains the coil: therefore, current is induced in the coil and electricity is generated.</p>
<div class="figure align-default">
<a class="reference internal image-reference" href="_images/MECHANICALPTO.PNG"><img alt="_images/MECHANICALPTO.PNG" src="_images/MECHANICALPTO.PNG" style="width: 400pt;" /></a>
</div>
<p><strong>Simulink Model</strong>
Step 1 through 3 are the same as in <a class="reference internal" href="#rm3-with-hydraulic-pto">RM3 with hydraulic PTO</a>.</p>
<ul class="simple">
<li><p>Step 4: Go inside PTO-Sim block and add one bus selector and one selector blocks. Only velocity is needed for this example.</p></li>
</ul>
<div class="figure align-default">
<a class="reference internal image-reference" href="_images/SELECTORS2.PNG"><img alt="_images/SELECTORS2.PNG" src="_images/SELECTORS2.PNG" style="width: 400pt;" /></a>
</div>
<ul class="simple">
<li><p>Step 5: Go to PTO-Sim library.</p></li>
<li><p>Step 6: By looking at the physical mechanical PTO model as shown above, the user can simply drag and drop PTO-Sim library blocks. In this case, only the direct drive linear generator is needed, and it is located under the generator box.</p></li>
</ul>
<div class="figure align-default">
<a class="reference internal image-reference" href="_images/USEPTOSIMLIB2.PNG"><img alt="_images/USEPTOSIMLIB2.PNG" src="_images/USEPTOSIMLIB2.PNG" style="width: 400pt;" /></a>
</div>
<ul class="simple">
<li><p>Step 7: Simply connect velocity from the selector to the input of the direct drive linear generator. The output PTO force is fed back to WEC-Sim.</p></li>
</ul>
<div class="figure align-default">
<a class="reference internal image-reference" href="_images/DDLINEARGENPTOSIM.PNG"><img alt="_images/DDLINEARGENPTOSIM.PNG" src="_images/DDLINEARGENPTOSIM.PNG" style="width: 400pt;" /></a>
</div>
<p><strong>Input File, Simulation, and Post-processing</strong>
The same as <a class="reference internal" href="#rm3-with-hydraulic-pto">RM3 with hydraulic PTO</a>.</p>
</div>
</div>
<div class="section" id="tutorial-oswec-with-pto-sim">
<h2>Tutorial: OSWEC with PTO-Sim<a class="headerlink" href="#tutorial-oswec-with-pto-sim" title="Permalink to this headline">¶</a></h2>
<p>This section describes how to use the OSWEC model with PTO-Sim. The same process as described in <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/features.html#tutorial-rm3-with-pto-sim">RM3 with PTO-Sim</a> ; however, since the OSWEC is a rotary device, it takes torque as an input and a rotary to linear motion conversion block is needed. The tutorials can be found on the <a class="reference external" href="https://github.com/WEC-Sim/WEC-Sim_Applications">WEC-Sim Applications</a> repository (both for a crank and for a rod).</p>
<div class="section" id="oswec-with-hydraulic-pto">
<h3>OSWEC with Hydraulic PTO<a class="headerlink" href="#oswec-with-hydraulic-pto" title="Permalink to this headline">¶</a></h3>
<p>A hydraulic PTO or mechanical PTO can be used with OSWEC but for simplicity a hydraulic PTO will be used as an example.</p>
<div class="figure align-default">
<a class="reference internal image-reference" href="_images/OSWECPHYMODEL.PNG"><img alt="_images/OSWECPHYMODEL.PNG" src="_images/OSWECPHYMODEL.PNG" style="width: 400pt;" /></a>
</div>
<div class="figure align-default">
<a class="reference internal image-reference" href="_images/MoTIONMECHANISM.PNG"><img alt="_images/MoTIONMECHANISM.PNG" src="_images/MoTIONMECHANISM.PNG" style="width: 400pt;" /></a>
</div>
<p><strong>Modeling of OSWEC with Hydraulic PTO</strong>
The same as <a class="reference internal" href="#rm3-with-hydraulic-pto">RM3 with hydraulic PTO</a>.</p>
<p><strong>Simulink Model</strong>
The Simulink model can be built as following:</p>
<ul class="simple">
<li><p>Step 1: Copy OSWEC tutorial folder to get started  <code class="docutils literal notranslate"><span class="pre">$Source\tutorials\OSWEC</span></code>.</p></li>
<li><p>Step 2: Open <code class="docutils literal notranslate"><span class="pre">OSWEC.slx</span></code> file and replace Rotary PTO (Local RY) with Rotational PTO UD Torque (Local RY).</p></li>
</ul>
<div class="figure align-default">
<a class="reference internal image-reference" href="_images/OSWECWITHPTOSIMBLOCK.PNG"><img alt="_images/OSWECWITHPTOSIMBLOCK.PNG" src="_images/OSWECWITHPTOSIMBLOCK.PNG" style="width: 400pt;" /></a>
</div>
<ul class="simple">
<li><p>Step 3: Use a subsystem and rename it to PTO-Sim where input is response and output is torque.</p></li>
</ul>
<div class="figure align-default">
<a class="reference internal image-reference" href="_images/OSWECWITHPTOSIMBLOCK1.PNG"><img alt="_images/OSWECWITHPTOSIMBLOCK1.PNG" src="_images/OSWECWITHPTOSIMBLOCK1.PNG" style="width: 400pt;" /></a>
</div>
<ul class="simple">
<li><p>Step 4: Go inside PTO-Sim block and drag and drop one bus selector and two selector blocks. Since pitch is driving the piston, selection index of each selector needs to be changed to 5. Next, go to PTO-Sim library and drag and drop all the blocks for the hydraulic PTO. The rotary to linear adjustable rod block can be found under rotary to linear conversion box.</p></li>
</ul>
<div class="figure align-default">
<a class="reference internal image-reference" href="_images/USEPTOSIMLIB3.PNG"><img alt="_images/USEPTOSIMLIB3.PNG" src="_images/USEPTOSIMLIB3.PNG" style="width: 400pt;" /></a>
</div>
<ul class="simple">
<li><p>Step 5: The rotary to linear adjustable rod block takes angular position and velocity from index selector blocks and PTO force from compressible fluid piston block. The outputs of the rotary to linear adjustable rod block are linear position, velocity, and torque. Linear position and velocity are used as inputs for compressible fluid piston and torque is fed back to WEC-Sim. The rest of the connections are the same as in RM3 with hydraulic PTO. The user is encouraged to go up one level to check the connections between PTO-Sim and WEC-Sim.</p></li>
</ul>
<div class="figure align-default">
<a class="reference internal image-reference" href="_images/HYDPTOSIMOSWEC.PNG"><img alt="_images/HYDPTOSIMOSWEC.PNG" src="_images/HYDPTOSIMOSWEC.PNG" style="width: 400pt;" /></a>
</div>
<p><strong>Input File, Simulation, and Post-processing</strong>
The same as <a class="reference internal" href="#rm3-with-hydraulic-pto">RM3 with hydraulic PTO</a>.</p>
</div>
</div>
<div class="section" id="other-pto-sim-tutorials">
<h2>Other PTO-Sim Tutorials<a class="headerlink" href="#other-pto-sim-tutorials" title="Permalink to this headline">¶</a></h2>
<p>Other PTO-Sim tutorials that were not discussed above can be found on the <a class="reference external" href="https://github.com/WEC-Sim/WEC-Sim_Applications">WEC-Sim Applications</a> repository.</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 43%" />
<col style="width: 57%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>PTO-Sim Application</strong></p></td>
<td><p><strong>Description</strong></p></td>
</tr>
<tr class="row-even"><td><p>RM3_Hydraulic_PTO</p></td>
<td><p>RM3 with hydraulic PTO</p></td>
</tr>
<tr class="row-odd"><td><p>RM3_cHydraulic_PTO</p></td>
<td><p>RM3 with compressible hydraulic PTO</p></td>
</tr>
<tr class="row-even"><td><p>RM3_DD_PTO</p></td>
<td><p>RM3 with direct drive linear generator</p></td>
</tr>
<tr class="row-odd"><td><p>OSWEC_Hydraulic_PTO</p></td>
<td><p>OSWEC with hydraulic PTO (adjustable rod)</p></td>
</tr>
<tr class="row-even"><td><p>OSWEC_Hydraulic_Crank_PTO</p></td>
<td><p>OSWEC with hydraulic PTO (crank)</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, National Renewable Energy Laboratory and National Technology &amp; Engineering Solutions of Sandia, LLC (NTESS)

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>